### 一、C语言中 `char`、`char*` 和 `char (*)[]` 类型总结

#### （一）基本概念
- **`char`**：C语言中的字符类型，用于存储单个字符，占用1个字节的内存空间。
- **`char*`**：字符指针类型，用于存储字符的地址，可以指向单个字符或者字符串。
- **`char (*)[]`**：数组指针类型，指向一个字符数组。

#### （二）一维数组场景

##### 1. 定义一维数组
```c
char a[5] = {'a', 'b', 'c', 'd', 'e'};
```

##### 2. 不同表达式的类型和含义

| 表达式 | 类型 | 含义 |
| ---- | ---- | ---- |
| `a` | `char*` | 数组名在大多数表达式中隐式转换为指向首元素的指针，代表数组首元素的地址 |
| `&a` | `char (*)[5]` | 取整个数组的地址，指向包含5个`char`元素的数组 |
| `a + 1` | `char*` | 指针向后移动一个`char`类型的大小（1字节），指向数组的第二个元素 |
| `&a + 1` | `char (*)[5]` | 指针向后移动一个`char [5]`类型的大小（5字节），指向数组`a`之后的内存位置 |
| `*a` | `char` | 对`a`解引用，得到数组的首元素 |

#### （三）指针场景

##### 1. 定义指针
```c
char* b = "hello";
```

##### 2. 不同表达式的类型和含义

| 表达式 | 类型 | 含义 |
| ---- | ---- | ---- |
| `b` | `char*` | 指向字符串`"hello"`首字符的指针 |
| `&b` | `char**` | 取指针`b`本身的地址，指向存储指针`b`的内存位置 |
| `b + 1` | `char*` | 指针向后移动一个`char`类型的大小（1字节），指向字符串的第二个字符 |
| `*b` | `char` | 对`b`解引用，得到指针`b`所指向的字符 |

#### （四）二维数组场景

##### 1. 定义二维数组
```c
char c[2][3] = {{'a', 'b', 'c'}, {'d', 'e', 'f'}};
```

##### 2. 不同表达式的类型和含义

| 表达式 | 类型 | 含义 |
| ---- | ---- | ---- |
| `c` | `char (*)[3]` | 二维数组名在大多数表达式中隐式转换为指向首行的指针，指向二维数组的第一行 |
| `c[0]` | `char*` | 二维数组`c`的第一行，在大多数表达式中隐式转换为指向第一行首元素的指针 |
| `&c` | `char (*)[2][3]` | 取整个二维数组的地址，指向包含2行3列`char`元素的二维数组 |
| `c + 1` | `char (*)[3]` | 指针向后移动一个`char [3]`类型的大小（3字节），指向二维数组的第二行 |
| `c[0] + 1` | `char*` | 指针向后移动一个`char`类型的大小（1字节），指向第一行的第二个元素 |
| `*(c + 1)` | `char*` | 对`c + 1`解引用，得到第二行的一维数组，在大多数表达式中隐式转换为指向第二行首元素的指针 |
| `*c[0]` | `char` | 对`c[0]`解引用，得到第一行的第一个元素 |
| `*(*(c + 1))` | `char` | 先对`c + 1`解引用得到第二行的一维数组，再对其解引用得到第二行的第一个字符 |


### 二、常见错误分析

#### （一）错误示例
```c
printf("错误：*(c + 1): %c\n", *(c + 1));
```

#### （二）错误原因
在二维数组中，`*(c + 1)` 的类型是 `char*`，而 `%c` 要求的参数类型是 `char`。使用 `%c` 打印指针会导致未定义行为，通常会输出乱码。

#### （三）正确做法
若要获取对应的字符，需要进行两次解引用操作，例如：
```c
printf("正确：*(*(c + 1)): %c\n", *(*(c + 1)));
```


### 三、总结
- 数组名在大多数表达式中会隐式转换为指向首元素的指针，但 `&` 取整个数组地址时除外。
- 指针运算时，移动的步长由指针的类型决定。
- sizeof(数组名)，sizeof中单独放数组名（注意是单独！），这里的数组名表示整个数组，计算的是整个数组的大小,单位是字节。
- &数组名，这里的数组名表示整个数组，取出的是整个数组的地址 (整个数组的地址和数组首元素的地址是有区别的)，整个数组的地址可以理解为&a => char (*) [5]，首地址可以理解为a => char *。
